<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Story</title>
    <link rel="stylesheet" href="/assets/style.css">
    <style>
        .progress-container {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background-color: rgba(255, 255, 255, 0.3);
        }

        .progress-bar {
            flex-grow: 1;
            margin: 0 2px;
            background-color: rgba(255, 255, 255, 0.5);
            transition: background-color 0.3s ease;
        }

        .progress-bar.active {
            background-color: #fff;
        }

        .carousel {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        .story {
            width: 100%;
            height: 100%;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .story.active {
            display: flex;
        }

        img, video {
            max-width: 100%;
            max-height: 100%;
        }
    </style>
</head>
<body>
    <div class="progress-container" id="progressContainer"></div>
    <div class="carousel" id="carousel">
        <div class="story active"><img src="imagem1.jpg" alt="Imagem Story 1"></div>
        <div class="story"><video src="video1.mp4" controls autoplay></video></div>
    </div>

    <script>
        const slides = document.querySelectorAll('.story');
        const progressContainer = document.getElementById('progressContainer');
        let currentSlide = 0;

        function createProgressBars() {
            progressContainer.innerHTML = '';
            slides.forEach(() => {
                const bar = document.createElement('div');
                bar.classList.add('progress-bar');
                progressContainer.appendChild(bar);
            });
            updateProgressBar();
        }

        function updateProgressBar() {
            const bars = document.querySelectorAll('.progress-bar');
            bars.forEach((bar, index) => {
                bar.classList.toggle('active', index === currentSlide);
            });
        }

        function showSlide(index) {
            slides.forEach((slide, i) => {
                slide.classList.toggle('active', i === index);
                const video = slide.querySelector('video');
                if (video) {
                    video.pause();
                    video.currentTime = 0;
                    if (i === index) {
                        video.muted = false;
                        video.play();
                    }
                }
            });
            updateProgressBar();
        }

        function nextSlide() {
            currentSlide = (currentSlide + 1) % slides.length;
            showSlide(currentSlide);
        }

        function prevSlide() {
            currentSlide = (currentSlide - 1 + slides.length) % slides.length;
            showSlide(currentSlide);
        }

        function nextStory() {
            const nextStoryLink = {
                '/story1/': '/story2/',
                '/story2/': '/story3/',
                '/story3/': '/story1/'
            }[window.location.pathname];
            window.location.href = nextStoryLink;
        }

        function prevStory() {
            const prevStoryLink = {
                '/story1/': '/story3/',
                '/story2/': '/story1/',
                '/story3/': '/story2/'
            }[window.location.pathname];
            window.location.href = prevStoryLink;
        }

        document.addEventListener('click', (e) => {
            const clickX = e.clientX;
            const screenWidth = window.innerWidth;
            if (clickX < screenWidth / 2) {
                prevSlide();
            } else {
                nextSlide();
            }
        });

        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeDistance = touchEndX - touchStartX;
            if (swipeDistance > 100) {
                prevStory();
            } else if (swipeDistance < -100) {
                nextStory();
            }
        }

        createProgressBars();
        showSlide(currentSlide);
    </script>
</body>
</html>
