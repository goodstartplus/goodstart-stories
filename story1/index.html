<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Story</title>
    <link rel="stylesheet" href="/assets/style.css">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: black;
        }
        .carousel {
            display: flex;
            width: 100vw;
            height: 100vh;
            position: relative;
        }
        .story {
            min-width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .story img, .story iframe, .story video {
            max-width: 100%;
            max-height: 100%;
        }
        .progress-container {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
        }
        .progress-bar {
            flex-grow: 1;
            height: 4px;
            background-color: rgba(255, 255, 255, 0.3);
        }
        .progress-bar.active {
            background-color: white;
            transition: width 2s linear;
        }
    </style>
</head>
<body>
    <div class="progress-container" id="progressContainer"></div>
    <div class="carousel" id="carousel">
        <div class="story"><img src="imagem1.jpg" alt="Imagem Story 1"></div>
        <div class="story">
            <iframe width="100%" height="100%" src="https://www.youtube.com/embed/d7Qqk1bqajQ?autoplay=1&mute=1&controls=0&loop=1&playlist=d7Qqk1bqajQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
    </div>
    <script>
        const slides = document.querySelectorAll('.story');
        const progressContainer = document.getElementById('progressContainer');
        let currentSlide = 0;

        function createProgressBars() {
            progressContainer.innerHTML = '';
            slides.forEach((_, index) => {
                const bar = document.createElement('div');
                bar.classList.add('progress-bar');
                if (index === 0) bar.classList.add('active');
                progressContainer.appendChild(bar);
            });
        }

        function updateProgressBar() {
            const bars = document.querySelectorAll('.progress-bar');
            bars.forEach((bar, index) => {
                bar.classList.toggle('active', index === currentSlide);
            });
        }

        function showSlide(index) {
            slides.forEach((slide, i) => {
                slide.style.display = i === index ? 'flex' : 'none';
            });
            updateProgressBar();
        }

        function nextSlide() {
            currentSlide = (currentSlide + 1) % slides.length;
            showSlide(currentSlide);
        }

        function prevSlide() {
            currentSlide = (currentSlide - 1 + slides.length) % slides.length;
            showSlide(currentSlide);
        }

        function nextStory() {
            const nextStoryLink = {
                '/story1/': '/story2/',
                '/story2/': '/story3/',
                '/story3/': '/story1/'
            }[window.location.pathname];
            window.location.href = nextStoryLink;
        }

        function prevStory() {
            const prevStoryLink = {
                '/story1/': '/story3/',
                '/story2/': '/story1/',
                '/story3/': '/story2/'
            }[window.location.pathname];
            window.location.href = prevStoryLink;
        }

        document.addEventListener('click', (e) => {
            const clickX = e.clientX;
            const screenWidth = window.innerWidth;
            if (clickX < screenWidth / 2) {
                prevSlide();
            } else {
                nextSlide();
            }
        });

        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeDistance = touchEndX - touchStartX;
            if (swipeDistance > 100) {
                prevStory();
            } else if (swipeDistance < -100) {
                nextStory();
            }
        }

        createProgressBars();
        showSlide(currentSlide);
    </script>
</body>
</html>
