<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playlist Embaralhada</title>
</head>
<body>

    <div id="player"></div>
    <button onclick="nextVideo()">Próximo Vídeo →</button>

    <script>
        let player;
        let shuffledPlaylist = [];
        let currentIndex = 0;

        // Carregar API do YouTube
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        document.head.appendChild(tag);

        // Inicializa o player
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '360',
                width: '640',
                videoId: '', // Começa vazio
                playerVars: {
                    listType: 'playlist',
                    list: 'PLgsOKGPevMvDW4vesGBUnz_kNe6fIg3tC', // ID da playlist
                    autoplay: 1,
                    controls: 0
                },
                events: {
                    'onReady': onPlayerReady
                }
            });
        }

        function onPlayerReady(event) {
            // Obter e embaralhar a playlist
            setTimeout(() => { 
                const playlist = player.getPlaylist(); 
                shuffledPlaylist = shuffleArray(playlist); 
                player.loadVideoById(shuffledPlaylist[currentIndex]);
            }, 2000); // Tempo para carregar a playlist
        }

        // Função para embaralhar a playlist
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Avançar para o próximo vídeo embaralhado
        function nextVideo() {
            currentIndex++;
            if (currentIndex >= shuffledPlaylist.length) {
                shuffledPlaylist = shuffleArray(shuffledPlaylist); // Embaralha novamente
                currentIndex = 0;
            }
            player.loadVideoById(shuffledPlaylist[currentIndex]);
        }
    </script>

</body>
</html>
